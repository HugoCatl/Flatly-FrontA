<div class="bg-scene">
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>
  <div class="orb orb-3"></div>
  <div class="orb orb-4"></div>
</div>

<div class="expenses-page">

  <!-- Header -->
  <div class="header">
    <div class="flat-avatar">ğŸ™ï¸</div>
    <div class="header-info">
      <h2 class="flat-name">Piso Madrid Centro</h2>
      <span class="flat-members">Alex Â· Julia Â· Guillermo</span>
    </div>
  </div>

  <!-- Summary cards -->
  <div class="summary-row">
    <div class="summary-card glass-card">
      <span class="summary-label">Mis Gastos</span>
      <span class="summary-amount mine">{{ myExpenses | number:'1.2-2' }} â‚¬</span>
    </div>
    <div class="summary-card glass-card">
      <span class="summary-label">Total Piso</span>
      <span class="summary-amount total">{{ totalExpenses | number:'1.2-2' }} â‚¬</span>
    </div>
  </div>

  <!-- Tabs -->
  <div class="tabs-wrapper glass-card">
    @for (tab of tabs; track tab.key) {
      <button
        class="tab"
        [class.active]="activeTab === tab.key"
        (click)="setTab(tab.key)">
        {{ tab.label }}
      </button>
    }
  </div>

  <!-- Tab Gastos -->
  @if (activeTab === 'gastos') {

    <div class="month-row">
      <span class="month-label">Febrero 2026</span>
      <button class="add-expense-btn" (click)="openForm()">
        <span class="material-icons-round">add</span>
        AÃ±adir gasto
      </button>
    </div>

    <div class="expense-list">
      @for (expense of expenses; track expense.name) {
        <div class="expense-card glass-card">
          <div class="expense-icon" [ngClass]="expense.iconClass">
            {{ expense.icon }}
          </div>
          <div class="expense-info">
            <span class="expense-name">{{ expense.name }}</span>
            <span class="expense-payer">Pagado por {{ expense.paidBy }}</span>
          </div>
          <span class="expense-amount">{{ expense.amount | number:'1.2-2' }} â‚¬</span>
        </div>
      }
    </div>

  } @else {
    <div class="empty-tab glass-card">
      <span class="empty-icon">ğŸš§</span>
      <p>SecciÃ³n en construcciÃ³n</p>
    </div>
  }

</div>

<!-- Formulario -->
<app-expense-form
  (onExpenseCreated)="onExpenseCreated($event)"
  (onDismiss)="false">
</app-expense-form>